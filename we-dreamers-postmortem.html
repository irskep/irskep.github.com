<!DOCTYPE html>
<html lang="en">
<head>
    <title>Steve Johnson’s Web Presence</title>

    <meta name="viewport" content="width=device-width">
    <meta charset="UTF-8">

    <link href='http://fonts.googleapis.com/css?family=Playfair+Display:400,700,400italic&subset=latin,latin-ext' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Playfair+Display+SC' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="http://steveasleep.com/css/reset.css" />
    <link rel="stylesheet" href="http://steveasleep.com/css/pygments.css" />
    <link rel="stylesheet" href="http://steveasleep.com/css/style.css" />

    <!--
    <meta charset="utf-8" />
      <link href="http://steveasleep.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Johnson’s Web Presence Full Atom Feed" />
      <link href="http://steveasleep.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Steve Johnson’s Web Presence Full RSS Feed" />
      <link href="http://steveasleep.com/feeds/articles.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Johnson’s Web Presence Categories Atom Feed" />
    -->

    <script src="http://steveasleep.com/js/hyphenate.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://steveasleep.com/js/main.js"></script>

</head>

<body id="index" class="home">
  <div id="pagecontainer">
    <header id="banner" class="body">
      <h1>
        <a href="http://steveasleep.com">
          <!--Steve Johnson’s Web Presence <strong></strong>-->
          <!--Steve Johnson&rsquo;s<br>partial creative output-->
          Steve Johnson&rsquo;s<br>Web Presence
        </a>
      </h1>
    </header><!-- /#banner -->

    <nav id="menu">
      <ul>
          <li><a href="http://steveasleep.com/">Read me</a></li>
          <li><a href="http://steveasleep.com/games.html">Games</a></li>
          <li><a href="http://steveasleep.com/open-source.html">Open source</a></li>
          <li><a href="http://steveasleep.com/pyglettutorial.html">Pyglet tutorial</a></li>
          <li><a href="http://thenestmusic.com">The Nest</a></li>
      </ul>
    </nav><!-- /#menu -->
  <section id="content" class="body"><article class="article">
      <header class="article-header">
    <h2 class="entry-title">
      <a href="http://steveasleep.com/we-dreamers-postmortem.html" rel="bookmark" title="Permalink to How I Made a Realtime Multiplayer Art Piece in 48 Hours, and How It Turned Out">
        How I Made a Realtime Multiplayer Art Piece in 48 Hours, and How It Turned&nbsp;Out
      </a>
    </h2>
    <div class="post-info">
        <time class="published" datetime="2013-05-04T00:00:00-07:00">
          04 May 2013
        </time>
    </div>
  </header>

    <div class="entry-content hyphenate"><p>We Dreamers is an abstract online sandbox that placed sixth in the Innovation
category of Ludum Dare 26.
<a href="http://steveasleep.com/we_dreamers_2">You can play it here.</a> It may take a
while for the 4+ <span class="caps">MB</span> of user data to download, so give it a minute or&nbsp;two.</p>
<p>Of all my programming escapades over the past couple of years, I&#8217;m most proud
of this one. Here&#8217;s a comprehensive collection of my thoughts about it,
including a discussions of the technical&nbsp;aspects.</p>
<h2 id="conception">Conception</h2>
<p>During the final voting round for Ludum Dare 26, I spent a couple of hours
coming up with good ideas for every possible theme…except minimalism. No way
that would get through,&nbsp;right?</p>
<p>When that theme was chosen, and I had to throw out all of my wonderful schemes,
most of which were single player pseudo-roguelikes. Instead, I picked a vague
idea: a web-based multiplayer world where you dig out rooms underground in a
grid. Maybe there would be shapes and colors and stuff. Genius! I figured out
the rest as I went&nbsp;along.</p>
<iframe width="560" height="315" src="//www.youtube.com/embed/2bmRw-QD1Bs" frameborder="0" allowfullscreen></iframe>

<p>You can do a few&nbsp;things:</p>
<ol>
<li>Move with the arrow keys or&nbsp;<span class="caps">WASD</span>.</li>
<li>Harvest color with&nbsp;space.</li>
<li>Dig out new rooms by bumping into walls. You need color to do this. The new 
   room will be the color of your dot, which is affected by the color in your&nbsp;bucket.</li>
<li>Dump color with r, g, and b (or 1, 2, and 3) to change the color of your&nbsp;dot.</li>
<li>Leave notes on rooms (if you are level 2) that appear at the bottom of the 
   screen when you enter the&nbsp;room.</li>
<li>Put down big block letters (if you are level 3) that you can use to spell 
   [sometimes naughty]&nbsp;words.</li>
</ol>
<p>You gain levels by adding content. If anyone else is online at the same time as
you, you can see their dot and any content they add, all&nbsp;live-updated.</p>
<p><img alt="screenshot" src="http://www.ludumdare.com/compo/wp-content/uploads/2013/05/2m-300x207.png" /></p>
<h2 id="competition-results">Competition&nbsp;results</h2>
<p>It placed 6th in the Innovation category out of 2,346 games. The rest of the
category scores aren&#8217;t as impressive as raw numbers but are still nice in terms
of the number of&nbsp;games:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Ranking</th>
<th>Score</th>
</tr>
</thead>
<tbody>
<tr>
<td>Innovation</td>
<td>#6</td>
<td>4.38</td>
</tr>
<tr>
<td>Mood</td>
<td>#210</td>
<td>3.36</td>
</tr>
<tr>
<td>Overall</td>
<td>#238</td>
<td>3.51</td>
</tr>
<tr>
<td>Audio</td>
<td>#464</td>
<td>2.85</td>
</tr>
<tr>
<td>Theme</td>
<td>#492</td>
<td>3.60</td>
</tr>
<tr>
<td>Humor</td>
<td>#549</td>
<td>2.23</td>
</tr>
<tr>
<td>Graphics</td>
<td>#650</td>
<td>2.92</td>
</tr>
<tr>
<td>Fun</td>
<td>#769</td>
<td>2.75</td>
</tr>
</tbody>
</table>
<p>People tend to have one of two viewpoints. They’re either like
<a href="http://www.ludumdare.com/compo/ludum-dare-26/?action=preview&amp;uid=22915">wrongcoder</a>:</p>
<blockquote>
<p>Neat. Quite unique. Technologically a marvel for the available time. To be
honest, though, I don’t get the purpose of&nbsp;it.</p>
</blockquote>
<p>or they’re like <a href="http://www.ludumdare.com/compo/ludum-dare-26/?action=preview&amp;uid=8308">BlennosoftGames</a>:</p>
<blockquote>
<p>There is something very cheerful about this game. As far as I can tell you
don’t “win” you just smile&nbsp;:)</p>
</blockquote>
<p>Most players were in the second category, so I’m very happy with how it turned
out. People seem to understand what I’m trying to do: create a virtual canvas
where contribution is easy, bad behavior is difficult, and quirky things can be
found given a few minutes’ exploration.
<a href="http://www.ludumdare.com/compo/ludum-dare-26/?action=preview&amp;uid=11022">Hegemege</a>
said it “felt a bit like geocaching,” which really tickles&nbsp;me.</p>
<p>The numbers are encouraging as well. When I checked earlier today, there were
<strong>3,019 rooms dug by 147 users.</strong> 54% of players dug 5 or more rooms, with some
people digging over 100 rooms. 11% had a note on them. 18% had a stamp. So
people were definitely doing more than running around and bumping into&nbsp;walls.</p>
<p>At first I was surprised that more rooms had stamps than notes, since you have
to be level 2 to write a note, and level 3 to place a stamp. But it was pointed
out to me that a stamp is just one letter, and you have to think a lot less to
put one down. Want to spell <span class="caps">DOG</span> <span class="caps">FART</span> in huge letters? It’s only seven easy&nbsp;pieces!</p>
<p>I got a friendly nod from a post on <a href="http://indiestatik.com/2013/04/29/ludum-dare-26/">Indie Statik&#8217;s Ludum Dare
highlights</a>. They compared We
Dreamers to Peter Molyneux’s game Curiosity. I&#8217;m not sure if that&#8217;s a
compliment, but it’s still nice to be noticed. They have a <a href="http://indiestatik.com/2013/05/02/ludum-dare-25-part-2/">second highlights
post</a> as&nbsp;well.</p>
<h2 id="technical-details">Technical&nbsp;details</h2>
<p>You might be wondering, like
<a href="http://www.ludumdare.com/compo/ludum-dare-26/?action=preview&amp;uid=20822">StuStutheBloo</a>
in We Dreamers’s comments, <strong>“How did you even put this together in the time&nbsp;available?”</strong></p>
<p>The short answer is that I used <a href="https://www.firebase.com/">Firebase</a>, “a cloud
database designed to power real-time, collaborative applications.” Put another
way, it’s a magic, event-driven Javascript object that updates instantly across
all clients. I didn’t have to write a server, or even deal with much
multiplayer logic at all; I just designed all interactive objects to listen to
Firebase events. The only thing special about the dot you control, as opposed
to those controlled by others and displayed on your screen, is that your client
is updating a Firebase subtree for your data. Those updates are reflected
instantly for you, and very quickly for everyone&nbsp;else.</p>
<p><strong>If you want to try your hand at a multiplayer online game for Ludum Dare, I
strongly recommend that you try Firebase.</strong> There are half a dozen two-player
games I haven’t been able to rate because I’d need to have another person
sitting next to me to play with. You don’t even need to get all crazy and
realtime – it’s also perfect for turn-based games. I hope to try something
head-to-head next&nbsp;time.</p>
<p>Now for a longer answer to StuStutheBoo’s question. Although Firebase was
essential to having the technical capability to build this kind of online
experience, it was even more important that I knew my tools extremely well. My
day job is to work on <a href="http://playbuildy.com/">Buildy</a>, an online multiplayer
realtime building sandbox where you can make just about anything. For <span class="caps">LD26</span>, I
brought out the same tools we use to make Buildy: <span class="caps">HTML5</span>, <span class="caps">CSS</span>,
<a href="http://coffeescript.org/">Coffeescript</a>, <a href="http://gruntjs.com/">Grunt</a>,
<a href="https://github.com/raimohanska/bacon.js">Bacon.js</a>,
<a href="http://www.schillmania.com/projects/soundmanager2/">SoundManager2</a>,
<a href="http://jquery.com/">jQuery</a>, <a href="http://craig.is/killing/mice">Mousetrap</a>, and
<a href="http://underscorejs.org/">underscore.js</a>. The whole game is a bunch of static
files hosted on Github Pages, just like the rest of steveasleep.com.  To
deploy, all I had to do was push to the <code>gh-pages</code> branch.</p>
<p>I didn’t do anything I hadn’t done before. All of the rendering is just styled
<code>&lt;div&gt;</code> elements. I’m familiar with each of those Javascript libraries. I’m
comfortable with the Chrome dev tools. Static files are incredibly easy to
deploy and serve without paying a dime. As a result of using all these familiar
pieces, I spent almost no time debugging simple (or even complicated)&nbsp;issues.</p>
<p>If you’re looking for advice about how to do Ludum Dare well, here’s mine:
<strong>learn your tools.</strong> Make sure you know how to write, run, and deploy your
game.  Don’t give yourself any surprises. (Python developers have a
particularly tough time with this one. There are still a few that ask you to
install PyGame to play and rate their game. I sympathize, having used py2app
for&nbsp;<span class="caps">LD19</span>.)</p>
<p>If you spend any time in Javascript, try to get your head around
<a href="https://github.com/raimohanska/bacon.js">Bacon.js</a>. It can decrease game logic
complexity by quite a lot if you’re willing to invest your brain resources in
it. We Dreamers would have had 30% more code and been 30% buggier without&nbsp;it.</p>
<h2 id="downsides-and-difficulties">Downsides and&nbsp;difficulties</h2>
<p>There’s another, secret reason why I was able to write We Dreamers so fast: I
didn’t give more than a passing thought about scale. I had no idea how much
data users would generate (currently ~4 <span class="caps">MB</span>) or how well browsers would deal
with 6000+ <span class="caps">DOM</span> elements moving around (not very well). Buildy partitions its
worlds into squares, so it’s easy to only load a piece at a time. We Dreamers
has no such wisdom, so every user loads the entire world when the page loads.
Threeish megabytes isn’t so bad for a game, but <span class="caps">DOM</span> performance turned out to
be a huge issue once things got big. To help players deal with the speed, I now
provide a stripped down version that web browsers can handle&nbsp;better.</p>
<p>I chose to do all the rendering via styled <code>&lt;div&gt;</code>s because I wanted to spend
as little time as possible on drawing code. I gambled that web browsers would
be smart enough to efficiently clip offscreen nodes. It almost worked, but I
really should have used <code>&lt;canvas&gt;</code>. It wouldn&#8217;t have been much more&nbsp;work.</p>
<p>I had a tiny bit of trouble with cross-browser compatibility.
<code>requestAnimationFrame</code> still hasn’t been un-prefixed in Firefox or Safari.
Safari didn’t like any of the <span class="caps">CSS</span> gradient variants I tried either, so the
doors are all white when viewed in that browser. In the end, though, I was able
to make it widely compatible and consistent. (This is another issue that would
have been avoided had I used <code>&lt;canvas&gt;</code>.)</p>
<p>Despite using Firebase, here was one aspect of distributed computing I did have
to deal with: syncing the time across all clients to get the color harvesting
to look right. I thought I was being clever by using a public web service that
gives you the current time in <span class="caps">JSON</span>. Unfortunately it’s hosted on Google App
Engine and blew through its quota soon after voting started, so now all the
players’ clocks are wrong anyway. It doesn’t affect the game much, but I should
have seen it&nbsp;coming.</p>
<p>There was one last issue that I was always aware of but never had time to deal
with: access controls. There are no <span class="caps">API</span>-level restrictions on who can edit what
data. At least one person exploited it to leave me an amusing note, but
fortunately there were no abusers. Firebase has the ability to use access
controls, but I didn&#8217;t have time to learn their <span class="caps">API</span>. Another reason to know
my tools really well, I&nbsp;suppose.</p>
<h2 id="in-closing">In&nbsp;closing,</h2>
<p>I had a fun and intense time this year. Of my three attempts to date, We
Dreamers is far and away my best Ludum Dare effort yet. I plan to come back for
another round in August for&nbsp;<span class="caps">LD27</span>.</p></div>
  </article></section>
    <footer id="pagefooter" class="body">
      <div class="social-links">
        <!--
          <a href="http://steveasleep.com/feeds/all.rss.xml">RSS</a>
        -->
        <a href="http://github.com/irskep">GitHub</a><br>
        <a href="http://twitter.com/irskep">Twitter</a><br>
        <a href="http://www.last.fm/user/irskep">Last.fm</a><br>
      </div>
      Stephen R. Johnson<br>
      <a href="mailto:steve@steveasleep.com">steve@steveasleep.com</a><br>
      San Francisco, California
    </footer><!-- /#pagefooter -->
  </div>

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4517625-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</body>
</html>