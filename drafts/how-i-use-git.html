<!DOCTYPE html>
<html lang="en">
<head>
    <title>Steve Landey – How I use&nbsp;git</title>

    <meta name="viewport" content="width=device-width">
    <meta charset="UTF-8">



    <meta charset="utf-8" />
      <link href="http://steveasleep.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Landey Full Atom Feed" />
      <link href="http://steveasleep.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Steve Landey Full RSS Feed" />
    <!--
      <link href="http://steveasleep.com/feeds/articles.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Landey Categories Atom Feed" />
    -->

    <script src="http://steveasleep.com/js/hyphenate.js" defer></script>
    <script src="http://steveasleep.com/js/main.js" defer></script>

    <style type="text/css">﻿html,body,body div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,figure,footer,header,menu,nav,section,time,mark,audio,video,details,summary{margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline;background:transparent}article,aside,figure,footer,header,nav,section,details,summary{display:block}img,object,embed{max-width:100%}html{overflow-y:scroll}ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted #000;cursor:help}table{border-collapse:collapse;border-spacing:0}th{font-weight:bold;vertical-align:bottom}td{font-weight:normal;vertical-align:top}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}pre{white-space:pre;word-wrap:break-word}input[type="radio"]{vertical-align:text-bottom}input[type="checkbox"]{vertical-align:bottom}.ie7 input[type="checkbox"]{vertical-align:baseline}.ie6 input{vertical-align:text-bottom}select,input,textarea{font:99% sans-serif}table{font-size:inherit;font:100%}small{font-size:85%}strong{font-weight:bold}td,td img{vertical-align:top}sub,sup{font-size:75%;line-height:0;position:relative}sup{top:-0.5em}sub{bottom:-0.25em}pre,code,kbd,samp{font-family:monospace, sans-serif}.clickable,label,input[type=button],input[type=submit],input[type=file],button{cursor:pointer}button,input,select,textarea{margin:0}button{width:auto;overflow:visible}.ie7 img{-ms-interpolation-mode:bicubic}.ie6 html{filter:expression(document.execCommand("BackgroundImageCache", false, true))}.clearfix:before,.clearfix:after{content:"\0020";display:block;height:0;overflow:hidden}.clearfix:after{clear:both}.clearfix{zoom:1}.hll{background-color:#ffffcc}.c{color:#999988;font-style:italic}.err{color:#a61717;background-color:#e3d2d2}.k{color:#000000;font-weight:bold}.o{color:#000000;font-weight:bold}.cm{color:#999988;font-style:italic}.cp{color:#999999;font-weight:bold;font-style:italic}.c1{color:#999988;font-style:italic}.cs{color:#999999;font-weight:bold;font-style:italic}.gd{color:#000000;background-color:#ffdddd}.ge{color:#000000;font-style:italic}.gr{color:#aa0000}.gh{color:#999999}.gi{color:#000000;background-color:#ddffdd}.go{color:#888888}.gp{color:#555555}.gs{font-weight:bold}.gu{color:#aaaaaa}.gt{color:#aa0000}.kc{color:#000000;font-weight:bold}.kd{color:#000000;font-weight:bold}.kn{color:#000000;font-weight:bold}.kp{color:#000000;font-weight:bold}.kr{color:#000000;font-weight:bold}.kt{color:#445588;font-weight:bold}.m{color:#009999}.s{color:#d01040}.na{color:#008080}.nb{color:#0086B3}.nc{color:#445588;font-weight:bold}.no{color:#008080}.nd{color:#3c5d5d;font-weight:bold}.ni{color:#800080}.ne{color:#990000;font-weight:bold}.nf{color:#990000;font-weight:bold}.nl{color:#990000;font-weight:bold}.nn{color:#555555}.nt{color:#000080}.nv{color:#008080}.ow{color:#000000;font-weight:bold}.w{color:#bbbbbb}.mf{color:#009999}.mh{color:#009999}.mi{color:#009999}.mo{color:#009999}.sb{color:#d01040}.sc{color:#d01040}.sd{color:#d01040}.s2{color:#d01040}.se{color:#d01040}.sh{color:#d01040}.si{color:#d01040}.sx{color:#d01040}.sr{color:#009926}.s1{color:#d01040}.ss{color:#990073}.bp{color:#999999}.vc{color:#008080}.vg{color:#008080}.vi{color:#008080}.il{color:#009999}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}canvas{display:none}html{line-height:160%;font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;background-color:#fafafa;color:#282828}a,a:visited,a:active{color:#3c3c50}a:hover{color:#5050fa}h1,h2,h3,h4,h5,h6{font-family:"Helvetica Neue", "HelveticaNeue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:normal;margin-top:1em;margin-bottom:.75em;line-height:1.5em}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{color:#3c3c50;text-decoration:none}h1 a:visited,h1 a:active,h1 a:hover,h2 a:visited,h2 a:active,h2 a:hover,h3 a:visited,h3 a:active,h3 a:hover,h4 a:visited,h4 a:active,h4 a:hover,h5 a:visited,h5 a:active,h5 a:hover,h6 a:visited,h6 a:active,h6 a:hover{color:#3c3c50;text-decoration:underline}h1,h2{font-size:1.5rem}h3,h4{font-size:1.2rem}h5,h6{font-size:1.0rem}h1,h3,h5{font-weight:bold}h2,h4,h6{font-weight:normal}p,ul,ol,pre{margin-bottom:1.5rem}pre,code,kbd,samp{font-family:Menlo, Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, monospace;background-color:#fff}code{color:#505050}pre{font-size:0.8rem;line-height:1rem;margin-left:-.5rem;margin-right:-.5rem;padding:.5rem .5rem}article ul{list-style-type:disc}article li{padding-left:0.5rem;margin-left:1rem;margin-bottom:.5rem}article li>ul,article li>ol{margin-top:.5rem}article iframe,table{margin-bottom:1.5rem}table th{text-align:left;font-weight:normal;padding-right:2rem;border-bottom:1px solid #dbdbdb}table td{padding-right:2rem}p{text-rendering:optimizeLegibility}article blockquote{margin-left:2em;font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;font-size:.9rem;line-height:1.2rem}iframe{max-width:100%}.left{float:left;padding-right:1rem}.right{float:right;padding-left:1rem}.center{display:block;margin:auto}a.implied-link{text-decoration:none}a.implied-link:hover{text-decoration:underline}.entry-content a{color:#3c3c8c}.entry-content a:hover{color:#5050fa}#pagecontainer{width:100%;max-width:50rem;max-width:calc($pageWidth - 2rem);margin-left:auto;margin-right:auto;padding:0rem 1rem 1rem 1rem}nav#menu,section#content,footer#pagefooter{width:100%}#sidebar{padding-left:1rem}#sidebar h3{font-size:1em}header#banner{box-sizing:border-box;line-height:2.3625rem;padding:0.75em 0}header#banner h1{font-size:1.75rem;font-family:"Helvetica Neue", "HelveticaNeue", Helvetica, Arial, "Lucida Grande", sans-serif;margin:.75rem 0;display:inline-block}header#banner .header-links{line-height:2.3625rem;margin-top:.75rem}header#banner .header-links a{margin-right:0.5rem}@media (min-width: 50rem){header#banner .header-links{display:block;float:right}}@media (min-width: 78rem){#layoutcontainer{display:flex;flex-direction:row-reverse;justify-content:stretch;align-items:stretch}#menu{display:none}#sidebar{flex-grow:0;flex-shrink:0;width:12rem;padding-right:1rem}#sidebar h1:first-child,#sidebar h2:first-child,#sidebar h3:first-child{margin-top:0}}#menu{margin-bottom:2rem}#menu ul:after{clear:both;content:".";display:block;height:0;visibility:hidden}#menu li a,#menu li strong{margin-right:0.5rem}article.home-page ul.article-summary-list{margin:0;padding:0}article.home-page ul.article-summary-list>li{list-style-type:none;margin:0;padding:0;padding-top:2rem;margin-bottom:2rem;border-top:1px solid #dbdbdb}article.home-page ul.article-summary-list>li:first-child{border-top:none;padding-top:0}article.home-page ul.article-summary-list>li:first-child .entry-title{margin-top:0}article.home-page ul.article-summary-list>li .read-more{text-align:right}#pagefooter{margin-top:4rem;margin-bottom:3rem;padding-top:1rem}#pagefooter .social-links{text-align:right;font-size:0.8rem;float:right}.article-header{margin-bottom:1rem}.article-header:after{clear:both;content:".";display:block;height:0;visibility:hidden}.article-header .entry-title{margin-top:0;margin-bottom:1rem}.article-header.article-header__index h1{font-size:3rem;font-weight:bold;margin:0}.article-header .post-info time{display:block;font-family:"Helvetica Neue", "HelveticaNeue", Helvetica, Arial, "Lucida Grande", sans-serif;font-weight:normal}.promo .promo-group{margin-bottom:2rem}.promo .promo-group h2{width:100%;margin:0 0 1rem 0;padding:0}.promo .promo-group .promo-group__outerlist{margin:0;padding:0}.promo .promo-group .promo-group__outerlist>li{list-style-type:none}.promo .promo-group .promo-item__logo{display:block;margin:0 auto 1rem auto;max-width:64px;max-height:64px;border-radius:5px}.promo .promo-group__opensource .promo-item{padding:0;margin:0}.promo .promo-group__writing .promo-item{padding:0;margin:0}.promo .promo-group__writing .promo-item__title{font-size:1.2rem}.promo .promo-group__writing .promo-item__blog{color:#6749e3}.promo .promo-group__writing .promo-item__twitter{color:#1da1f2}.promo .promo-group__writing .promo-item__oldblog,.promo .promo-group__writing .promo-item__résumé{color:#8e8e8e}.promo .promo-group__games .promo-group__outerlist,.promo .promo-group__apps .promo-group__outerlist{display:flex;flex-flow:row wrap;justify-content:flex-start;margin-right:-2rem}@media (max-width: 50rem){.promo .promo-group__games .promo-group__outerlist,.promo .promo-group__apps .promo-group__outerlist{justify-content:space-around}}.promo .promo-group__games .promo-item,.promo .promo-group__apps .promo-item{flex-grow:0;margin:0 2rem 1rem 0;padding:0;text-align:center}@media (max-width: 50rem){.promo .promo-group__games .promo-item,.promo .promo-group__apps .promo-item{flex-grow:1;flex-basis:40%}}.resume-image{image-rendering:-moz-crisp-edges;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;transform:translateY(8px)}

/*# sourceMappingURL=style.css.map */</style>

</head>

<body>
  <div id="layoutcontainer">
    <div id="pagecontainer">
      <header id="banner" class="body">
        <h1>
          <a href="http://steveasleep.com">
            <!--Steve Landey <strong></strong>-->
            <!--Steve Johnson&rsquo;s<br>partial creative output-->
            Steve Landey
          </a>
        </h1>
        <div class="header-links">
            <a href="mailto:randos@steve.steveasleep.com">Email</a>
            <a href="https://github.com/irskep">GitHub</a>
            <a href="https://www.youtube.com/channel/UC0lx9IhbHiM5XTcdISqttWQ">YouTube</a>
            <a href="https://slamjamsen.bandcamp.com">Bandcamp</a>
            <a href="https://irskep.itch.io">itch.io</a>
        </div>
      </header>
      <!--
      <nav id="menu">
        <ul>
          <li><strong>Writing:</strong>
              <a href="https://blog.steveasleep.com/">Blog</a>
              <a href="https://twitter.com/irskep">Twitter</a>
              <a href="http://steveasleep.com/articles/">Old blog</a>
              <a href="http://steveasleep.com/resume.html">Résumé</a>
          </li>
          <li><strong>Games:</strong>
              <a href="https://irskep.itch.io/dr-hallervorden">Dr. Hallervorden</a>
              <a href="https://irskep.itch.io/powerq">Power-Q</a>
              <a href="https://irskep.itch.io/roguebasement">Rogue Basement</a>
              <a href="http://steveasleep.com/games.html">17 more games</a>
          </li>
          <li><strong>Apps:</strong>
              <a href="http://sendimals.com">Sendimals</a>
              <a href="https://itunes.apple.com/us/app/hipmunk-travel-search/id419950680?mt=8">Hipmunk</a>
              <a href="https://itunes.apple.com/us/app/asana-organize-tasks-work/id489969512?mt=8">Asana</a>
          </li>
          <li><strong>Open Source:</strong>
              <a href="https://asana.github.io/Drawsana/">Drawsana</a>
              <a href="http://literallycanvas.com/">Literally Canvas</a>
              <a href="http://steveasleep.com/clubsandwich">clubsandwich</a>
              <a href="http://steveasleep.com/BearLibTerminal-Swift/">BearLibTerminal-Swift</a>
              <a href="http://steveasleep.com/jumbogrove">Jumbo Grove</a>
              <a href="https://sphinx-better-theme.readthedocs.io/en/latest/">sphinx-better-theme</a>
          </li>
        </ul>
      </nav>
      -->

  <section id="content" class="body"><article class="article">
      <header class="article-header">
    <h1 class="entry-title">
      <a href="http://steveasleep.com/drafts/how-i-use-git.html" rel="bookmark" title="Permalink to How I use git">
        How I use&nbsp;git
      </a>
    </h1>
    <div class="post-info">
        <time class="published" datetime="2017-11-17T00:00:00-08:00">
          November 17, 2017
        </time>
    </div>
  </header>

    <div class="entry-content hyphenate"><p>When you use a tool for a long time, it can be easy to forget what it was like
to learn it for the first time. It becomes routine. As someone who passed this
point with git long ago, I thought it might be helpful to share my day-to-day
workflow in case someone wandering around the internet finds it&nbsp;helpful.</p>
<h1>Vocabulary</h1>
<p>To understand this post you need to know what these words mean in the git&nbsp;universe:</p>
<ul>
<li>Staging&nbsp;area</li>
<li>Commit</li>
<li>Amend</li>
<li>Rebase</li>
<li>Clone</li>
<li>Branch</li>
<li>Checkout</li>
</ul>
<h1>My employer&#8217;s git&nbsp;workflow</h1>
<p>I work at Hipmunk. We use a rebase-and-squash workflow. This means that when
a pull request has been reviewed, the tests pass, and it&#8217;s ready to go
&#8220;into production,&#8221; all the commits from the branch are combined into one and
added as a single commit on the master branch, with the pull request
description as the commit&nbsp;message.</p>
<p>So&nbsp;this:</p>
<div class="highlight"><pre><span></span>master:         [a]---&gt;[b]---&gt;[c]---&gt;[d]
                   \
feature branch:     \-&gt;[e]---&gt;[f]
</pre></div>


<p>Becomes&nbsp;this:</p>
<div class="highlight"><pre><span></span>master:         [a]---&gt;[b]---&gt;[c]---&gt;[d]---&gt;[ef]
</pre></div>


<p>Most people use merges&nbsp;instead:</p>
<div class="highlight"><pre><span></span>master:         [a]---&gt;[b]---&gt;[c]---&gt;[d]--&gt;[g]
                   \                     /
feature branch:     \-&gt;[e]---&gt;[f]-------/
</pre></div>


<p>But we&nbsp;don&#8217;t.</p>
<h1>Git remote&nbsp;setup</h1>
<p>There are three git clones I care&nbsp;about:</p>
<ul>
<li>The canonical one at <code>github.com/Hipmunk/blah</code>. This is <code>upstream</code>.</li>
<li>My GitHub clone at <code>github.com/irskep/blah</code>. This is <code>origin</code>.</li>
<li>My local&nbsp;clone.</li>
</ul>
<h1>Starting work on a new&nbsp;feature</h1>
<p>The very first thing I do every time is <code>git fetch upstream</code>, to make sure I
make my new branch from the latest <code>master</code>. Then I
<code>git clone upstream/master -b BRANCH_NAME</code>.</p>
<p>For features, I name my branches like <code>pr/feature-name</code>. The <code>pr/</code> prefix
means this branch is meant to eventually be a pull request on GitHub, as
opposed to a scratchpad, merge of some unfinished demo code, or release&nbsp;branch.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>git fetch upstream <span class="o">&amp;&amp;</span> git clone upstream/master -b pr/fix-the-bug
<span class="c1"># I actually have that command aliased to &quot;gbn&quot;, so in reality I type:</span>
<span class="c1"># gbn pr/fix-the-bug</span>
</pre></div>


<h2>Git command&nbsp;recap</h2>
<ul>
<li><code>git fetch upstream</code> to make sure local clone of <code>upstream</code> is up to&nbsp;date</li>
<li><code>git checkout upstream/master -b BRANCH</code> creates a new branch starting from
  the <code>HEAD</code> of the <code>master</code> branch of the local <code>upstream</code> clone</li>
</ul>
<h1>Working on the&nbsp;feature</h1>
<p>I commit frequently, and I amend my commits frequently. My rules for committing&nbsp;are:</p>
<ul>
<li>Always read the entire diff before staging. This means either running
  <code>git diff</code> before <code>git add .</code>, or staging with <code>git add -p .</code> to get only
  the changes I&nbsp;want.</li>
<li>If code is for testing or debugging only, commit it without any other
  changes in the same commit. When I no longer need it, revert the&nbsp;commit.</li>
<li>If I have written out a complete idea, and the code compiles, commit without
  executing it. Try to give commits descriptive names that define what should
  and should not be in the&nbsp;commit.</li>
<li>If I run the code and it doesn&#8217;t work, and I then fix the bug, then either
  amend the commit that introduced the bug immediately, or create a commit that
  refers to the buggy commit in its&nbsp;description.</li>
<li>Commits containing unit tests should only contain the new tests, or fixes for
  bugs found by those tests. I don&#8217;t have a good reason for doing this, it&#8217;s
  just what I do most&nbsp;often.</li>
<li>Code review feedback is in bite-sized pieces at the&nbsp;end.</li>
</ul>
<p>When I feel like I&#8217;m ready to step back and either do somethinking or open a
pull request, I run <code>git rebase -i upstream/dev</code> to fix any issues with my
commit&nbsp;history.</p>
<p>Here&#8217;s an example&nbsp;workflow:</p>
<div class="highlight"><pre><span></span><span class="c1"># gbn = git fetch upstream &amp;&amp; git checkout -b upstream/master $1</span>
gbn pr/account-settings-loading-state
<span class="c1"># ... work ...</span>
git add -p .  <span class="c1"># stage everything relevant. I alias this to `gap`.</span>
git commit -m <span class="s2">&quot;Add loading state to account settings screen&quot;</span>
<span class="c1"># ... run, find bug ...</span>
git add -p .  <span class="c1"># stage the bug fix</span>
<span class="c1"># this amends the most recent commit without prompting to change</span>
<span class="c1"># the message:</span>
git commit --amend -CHEAD <span class="c1"># I alias this to `gcaa`.</span>
<span class="c1"># ... write tests ...</span>
git commit -am <span class="s2">&quot;Write tests&quot;</span>  <span class="c1"># I admit this is what I really write.</span>
<span class="c1"># I alias gcam to `git commit -am` to save typing.</span>
<span class="c1"># ... run tests, find bug, fix bug</span>
git diff    <span class="c1"># check diff</span>
git add .   <span class="c1"># diff was fine, stage everything</span>
git commit -m <span class="s1">&#39;Fix initial implementation&#39;</span>
<span class="c1"># Done, tests pass! Now to fix the history:</span>
git rebase -i upstream/master
    <span class="c1"># That will open a text editor containing these lines:</span>
    pick 0abc Add loading state to account settings screen
    pick 5xyz Write tests
    pick qrs4 Fix initial implementation

    <span class="c1"># I edit it to look like this:</span>
    pick 0abc Add loading state to account settings screen
    fixup qrs4 Fix initial implementation
    pick 5xyz Write tests

    <span class="c1"># Save and quit.</span>
    <span class="c1"># Now my commit history looks like this:</span>
    e351 Add loading state to account settings screen
    facb Write tests
</pre></div>


<h2>Git command&nbsp;recap</h2>
<ul>
<li><code>git add -p</code> opens an interactive interface for adding lines to the staging&nbsp;area.</li>
<li><code>git commit -m</code> turns the staging area into a commit with the given&nbsp;message.</li>
<li><code>git commit --amend -CHEAD</code> amends the latest commit to include the changes
  in the staging area without altering the commit&nbsp;message.</li>
<li><code>git commit -am</code> adds all change to the staging area (except untracked files)
  and creates a new commit with the given&nbsp;message.</li>
<li><code>git diff</code> shows all unstaged changes (except untracked&nbsp;files).</li>
<li><code>git add .</code> adds all changes, including untracked files, to the staging&nbsp;area.</li>
<li><code>git rebase -i ANCESTOR</code> lets you interactively reorder, omit, and
  combine all commits in the current branch back to <code>ANCESTOR</code>.</li>
</ul>
<h1>Getting&nbsp;sidetracked</h1>
<p>If I&#8217;m working on a task but notice something else that needs to be done, I&#8217;m
not always disciplined about staying on track. If I do decided to wander out of
scope for my current branch, here&#8217;s what I&nbsp;do:</p>
<div class="highlight"><pre><span></span><span class="c1"># starting on pr/original-branch...</span>
git add -p .  <span class="c1"># stage everything that matters to this branch</span>
git checkout -b pr/distraction
<span class="c1"># Develop pr/distraction using normal workflow</span>
git rebase -i upstream/master
    <span class="c1"># Using interactive rebase, I remove all commits from pr/original-branch,</span>
    <span class="c1"># keeping only the ones I added after creating pr/distraction.</span>
</pre></div>


<p>Now I can open a pull request containing only the changes from
<code>pr/distraction</code>, and avoid creating a huge, badly-scoped diff! And I can
<code>git checkout pr/original-branch</code> to keep working on what I was&nbsp;before.</p>
<h1>Keeping up to&nbsp;date</h1>
<p>When working quickly on a small team, it&#8217;s not uncommon to need to rebase
on <code>upstream/master</code> to get the latest version of an <span class="caps">API</span> or fix a conflict.
The first step of this process is just <code>git rebase upstream master</code>.</p>
<p>But what if there&#8217;s a conflict? Forget opening a text editor and dealing
with all those <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> garbage lines. Instead, I do&nbsp;this:</p>
<div class="highlight"><pre><span></span>git mergetool -t opendiff  <span class="c1"># aliased to `gmto`</span>
</pre></div>


<p>This uses Apple&#8217;s graphical diff tool. Press Command+D to scroll to the next
conflict. Use the bottom right option control to choose different resolutions,
or manually edit the bottom area&nbsp;yourself.</p>
<h1>Getting ahead of&nbsp;myself</h1>
<p>At Hipmunk, we try to keep patches small so that reviewers can do their best
work. But I&#8217;m an impatient person, so I&#8217;ll often write the first half of a
feature, like the data models, open a pull request for that, and start working
on the second half, like the <span class="caps">UI</span>, before the first pull request has been
reviewed and&nbsp;committed.</p>
<p>Let&#8217;s say the first pull request is for <code>pr/account-page-data-models</code>. There
are two&nbsp;commits:</p>
<div class="highlight"><pre><span></span><span class="n">aaa</span><span class="o">:</span> <span class="n">Account</span> <span class="n">page</span> <span class="n">data</span> <span class="n">models</span>
<span class="n">bbb</span><span class="o">:</span> <span class="n">Account</span> <span class="n">page</span> <span class="n">data</span> <span class="n">model</span> <span class="n">tests</span>
</pre></div>


<p>On a branch starting at that point, <code>pr/account-page-ui</code>, we add three&nbsp;commits:</p>
<div class="highlight"><pre><span></span><span class="n">ccc</span><span class="o">:</span> <span class="n">Account</span> <span class="n">page</span> <span class="n">view</span> <span class="n">controller</span>
<span class="n">ddd</span><span class="o">:</span> <span class="n">Account</span> <span class="n">page</span> <span class="n">content</span>
<span class="n">eee</span><span class="o">:</span> <span class="n">Account</span> <span class="n">page</span> <span class="n">UI</span> <span class="n">tests</span>
</pre></div>


<p>At this point, we check our email and see that <code>pr/account-page-data-models</code>
has some code review feedback we need to address. So take care of&nbsp;that:</p>
<div class="highlight"><pre><span></span>git checkout pr/account-page-data-models
<span class="c1"># type type type</span>
git commit -am <span class="s2">&quot;Address code review feedback&quot;</span>
</pre></div>


<p>At that point, the reviewer approves the pull request, and we commit
<code>pr/account-page-data-models</code> to <code>upstream/master</code>.</p>
<p>Now we are in a pickle, because <code>upstream/master</code> has <span class="caps">ONE</span> commit for the
first set of changes, but our branch <code>pr/account-page-ui</code> has <span class="caps">TWO</span> commits for
the same changes! If we <code>git fetch upstream &amp;&amp; git rebase upstream/master</code>,
we will almost certainly have&nbsp;conflicts.</p>
<div class="highlight"><pre><span></span>upstream/master:
    fff: PR #1234 Account page data models + tests
pr/account-page-ui:
    aaa: Account page data models
    bbb: Account page data model tests
    ccc: Account page view controller
    ddd: Account page content
    eee: Account page UI tests
</pre></div>


<p>I have two strategies for dealing with this situation. One is more
straightforward and has more steps. The other is more confusing and has
fewer&nbsp;steps.</p>
<h2>The straightforward&nbsp;version</h2>
<div class="highlight"><pre><span></span>git checkout pr/account-page-ui
git rebase -i aaa^  <span class="c1"># rebase starting at aaa&#39;s parent</span>
    pick aaa
    fixup bbb
    pick ccc
    pick ddd
    pick eee: Account page UI tests
</pre></div>


<p>By squashing all commits from the first pull request, we end up with a commit
whose diff is identical to the one in <code>upstream/master</code>, so a rebase no longer
reports&nbsp;conflicts.</p>
<h2>The confusing&nbsp;version</h2>
<p>When <code>git rebase upstream/master</code> reports conflicts, simply <code>git rebase --skip</code>
until it&nbsp;succeeds!</p>
<p>This works because conflicts will only appear on commits that ended up as part
of the combined&nbsp;commit.</p>
<h1>A final note about&nbsp;aliases</h1>
<p>Almost every command I use daily has an alias. There is no reason to keep
recalling the arcane interface of git. By using aliases, I no longer think of
these commands as &#8220;git commant plus necessary options.&#8221; Instead, I think of
them as single verbs. Who the heck wants to remember &#8220;amend the latest commit
with my changes&#8221; as <code>git commit --amend -CHEAD</code>? What a&nbsp;pain!</p>
<p>Exceptions to the rule for me are <code>git add</code> and <code>git rebase</code>, which make sense
on their&nbsp;own.</p>
<ul>
<li><code>gfu</code>: <code>git fetch upstream</code></li>
<li><code>gcb</code>: <code>git checkout upstream/master -b BRANCH</code></li>
<li><code>gap</code>: <code>git add -p</code></li>
<li><code>gcm</code>: <code>git commit -m</code></li>
<li><code>gcaa</code>: <code>git commit --amend -CHEAD</code></li>
<li><code>gcam</code>: <code>git commit -am</code></li>
<li><code>gd</code>: <code>git diff</code></li>
<li><code>gbn</code>: <code>git fetch upstream &amp;&amp; gcb $1</code></li>
</ul></div>
  </article></section>
    </div>

    <!--
    <nav id="sidebar">
      <ul>
          <h3>Writing</h3>
            <li><a href="https://blog.steveasleep.com/">Blog</a></li>
            <li><a href="https://twitter.com/irskep">Twitter</a></li>
            <li><a href="http://steveasleep.com/articles/">Old blog</a></li>
            <li><a href="http://steveasleep.com/resume.html">Résumé</a></li>
          <h3>Games</h3>
            <li><a href="https://irskep.itch.io/dr-hallervorden">Dr. Hallervorden</a></li>
            <li><a href="https://irskep.itch.io/powerq">Power-Q</a></li>
            <li><a href="https://irskep.itch.io/roguebasement">Rogue Basement</a></li>
            <li><a href="http://steveasleep.com/games.html">17 more games</a></li>
          <h3>Apps</h3>
            <li><a href="http://sendimals.com">Sendimals</a></li>
            <li><a href="https://itunes.apple.com/us/app/hipmunk-travel-search/id419950680?mt=8">Hipmunk</a></li>
            <li><a href="https://itunes.apple.com/us/app/asana-organize-tasks-work/id489969512?mt=8">Asana</a></li>
          <h3>Open Source</h3>
            <li><a href="https://asana.github.io/Drawsana/">Drawsana</a></li>
            <li><a href="http://literallycanvas.com/">Literally Canvas</a></li>
            <li><a href="http://steveasleep.com/clubsandwich">clubsandwich</a></li>
            <li><a href="http://steveasleep.com/BearLibTerminal-Swift/">BearLibTerminal-Swift</a></li>
            <li><a href="http://steveasleep.com/jumbogrove">Jumbo Grove</a></li>
            <li><a href="https://sphinx-better-theme.readthedocs.io/en/latest/">sphinx-better-theme</a></li>
      </ul>
    </nav>
    -->

  </div>

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4517625-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</body>
</html>