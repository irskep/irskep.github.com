<!DOCTYPE html>
<html lang="en">
<head>
    <title>Steve Johnson’s Web Presence</title>

    <meta name="viewport" content="width=device-width">
    <meta charset="UTF-8">

    <link href='http://fonts.googleapis.com/css?family=Playfair+Display:400,700,400italic&subset=latin,latin-ext' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Playfair+Display+SC' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet'>

    <link rel="stylesheet" href="http://steveasleep.com/css/reset.css" />
    <link rel="stylesheet" href="http://steveasleep.com/css/pygments.css" />
    <link rel="stylesheet" href="http://steveasleep.com/css/style.css" />

    <!--
    <meta charset="utf-8" />
      <link href="http://steveasleep.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Johnson’s Web Presence Full Atom Feed" />
      <link href="http://steveasleep.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Steve Johnson’s Web Presence Full RSS Feed" />
      <link href="http://steveasleep.com/feeds/articles.atom.xml" type="application/atom+xml" rel="alternate" title="Steve Johnson’s Web Presence Categories Atom Feed" />
    -->

    <script src="http://steveasleep.com/js/hyphenate.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://steveasleep.com/js/main.js"></script>

</head>

<body>
  <header id="banner" class="body">
    <h1>
      <a href="http://steveasleep.com">
        <!--Steve Johnson’s Web Presence <strong></strong>-->
        <!--Steve Johnson&rsquo;s<br>partial creative output-->
        Steve Johnson&rsquo;s<br>Web Presence
      </a>
    </h1>
  </header>

  <div id="pagecontainer">

    <nav id="menu">
      <ul>
          <li><a href="http://steveasleep.com/">Blog</a></li>
          <li><a href="http://steveasleep.com/pyglettutorial.html">Pyglet tutorial</a></li>
          <li><a href="http://steveasleep.com/resume.html">Résumé</a></li>
          <li><a href="http://steveasleep.com/computerwords">Computer Words</a></li>
          <li><a href="http://literallycanvas.com/">Literally Canvas</a></li>
          <li><a href="http://mrjob.readthedocs.org/">mrjob</a></li>
          <li><a href="http://steveasleep.com/games.html">Games</a></li>
          <li><a href="http://hipmunk.github.io">Hipmunk OSS</a></li>
          <li><a href="http://thenestmusic.com">The Nest</a></li>
          <li><a href="http://slamjamsen.com">Slam Jamsen</a></li>
          <li><a href="http://steveasleep.com/music.html">Other music</a></li>
      </ul>
    </nav>

  <section id="content" class="body"><article class="article">
      <header class="article-header">
    <h2 class="entry-title">
      <a href="http://steveasleep.com/drafts/home-audio-with-os-x-and-cheap-consumer-electronics.html" rel="bookmark" title="Permalink to Home audio with OS X and cheap consumer electronics">
        Home audio with <span class="caps">OS</span> X and cheap consumer&nbsp;electronics
      </a>
    </h2>
    <div class="post-info">
        <time class="published" datetime="2017-03-12T00:00:00-08:00">
          12 Mar 2017
        </time>
    </div>
  </header>

    <div class="entry-content hyphenate"><h1 id="home-audio-adventures">Home audio&nbsp;adventures</h1>
<p>Since moving into our current house, Casey and I have been trying to make our living room audio setup seamless. We have a few constraints that make it impractical for us to just buy our way to a&nbsp;solution.</p>
<h2 id="the-wish-list">The wish&nbsp;list</h2>
<p>Music is our primary focus. We have no need to switch video. <span class="caps">RCA</span> and 3.5mm cables are the norm, not <span class="caps">HDMI</span>. This doesn’t prevent us from getting a receiver that supports <span class="caps">RCA</span>, but those tend to be bulky and have lots of&nbsp;buttons.</p>
<p>We share a large <span class="caps">MP3</span> library that we would both like to control. It’s easy enough to take turns plugging our computers or phones into an aux cable, but it’s so much more seamless to collaboratively queue things up in the same player. There’s a mix of Windows and <span class="caps">OS</span> X machines in the house, so the solution has to be&nbsp;multi-platform.</p>
<p>We have a <span class="caps">PC</span> that functions as a <span class="caps">TV</span> and gaming machine. Latency is important for that use case, so wifi is&nbsp;out.</p>
<p>Speaking of gaming, it would be nice to be able to hear two audio sources at a time. I often disable game soundtracks and play my own&nbsp;tunes.</p>
<p>When people come stay with us, I want to be able to explain how it all works in less than 120&nbsp;characters.</p>
<p>And finally, I shouldn’t need to mess with it constantly. It should do everything we need without crashing or&nbsp;fiddling.</p>
<p>I’ve tried a bunch of low-cost configurations, and this is what we have today. It’s reliable, predictable, and hits all the points&nbsp;above.</p>
<h2 id="mac-as-media-server">Mac as media&nbsp;server</h2>
<p>I have an old Mac laptop from 2011. Here’s how I set it up to act as a media server and audio passthrough device. Note that I already have an amplifier for the speakers. If you don’t, well, maybe you’re better off with a regular receiver! Anyway, on to&nbsp;setup.</p>
<p>Find an out-of-the-way location. Plug the laptop into the speakers and power. We’re about to set things up so you don’t need to be physically at the computer to manage it, so don’t worry about the location being convenient to&nbsp;access.</p>
<h3 id="initial-setup-seated-at-media-server">Initial setup (seated at media&nbsp;server)</h3>
<p>Open System Preferences. Select Sharing. Check the “Remote Management” box, and when the drop-down opens, select “Observe” and&nbsp;“Control.”</p>
<p><img alt="Sharing preference pane" src="http://steveasleep.com/img/home_audio_adventures/prefpane_sharing.png" /></p>
<p>Set or remember the “Computer Name” field at the top. A nice, short name you could use would be <code>media-server</code>. Going forward, I’m going to assume you used that&nbsp;name.</p>
<p>Still in System Preferences, click the back button. Go to “Users <span class="amp">&amp;</span> Groups”. Click “Login Options.” Make sure the “Automatic login:” menu is set to the user you want. (You may also need to go to “Security <span class="amp">&amp;</span> Privacy” in System Preferences and uncheck “Disable automatic&nbsp;login.”)</p>
<p>Install <a href="http://semaja2.net/projects/insomniaxinfo/">InsomniaX</a> if you’re using a laptop. This will let you close the lid without putting the laptop to sleep. Once installed and running, open the menu, and make sure Preferences &gt; “Start on Login” is&nbsp;checked.</p>
<p>Now close the lid and head to another Mac so you can configure things more&nbsp;comfortably!</p>
<h3 id="remaining-setup-remote">Remaining setup&nbsp;(remote)</h3>
<p>On Mac number two, open a Finder window. In the Finder menu bar, select Go &gt; Network or hit Command+Shift+K. Pick <code>media-server</code> from the list and click the Share Screen button. Enter your username and password for your account on the media&nbsp;server.</p>
<p>You should see a list with <code>media-server</code> init. Click it. There should be a “Share Screen…” button. Click it. Enter your username and password from <code>media-server</code>.</p>
<p><img alt="Network folder in Finder" src="http://steveasleep.com/img/home_audio_adventures/finder_network.png" />
￼
(I call mine&nbsp;“fiona.”)</p>
<p>Before you really get going, you might want to take some time to open your wifi router’s settings and assign a dedicated internal <span class="caps">IP</span> to the media server. Macs will be able to connect to it as <code>media-server.local</code>, but Windows machines won’t. I won’t provide specific instructions here due to the infinite variety of router software, but it was pretty simple on my Airport&nbsp;Extreme.</p>
<p>From here there are a ton of things you can do, so I’ll organize the rest of this post by&nbsp;topic.</p>
<h2 id="spotify">Spotify</h2>
<p>Spotify is easy to set up but limited to one user. Install Spotify on the media server, sign in to it, and ask it to launch itself on login. (Menu -&gt; Spotify -&gt; Preferences, Show Advanced Settings, Open Spotify automatically after you log in to the&nbsp;computer.)</p>
<p>Your devices can now control Spotify on the media server, but you have to be logged in as you. Even with family sharing, there’s no way to share a device among multiple user accounts without going for a super-technical solution like <a href="https://github.com/dirkgroenen/mopidy-mopify">mopidy-mopify</a>.</p>
<p>In our case, this means one of us has to use aux or Bluetooth to play Spotify through the&nbsp;speakers. </p>
<h2 id="mp3s">MP3s</h2>
<p>All of my solutions to the <span class="caps">MP3</span> library problem are, unfortunately, pretty technical. I don’t have any recommendations for people who are not comfortable with the&nbsp;terminal.</p>
<p>The best-documented ways to share an <span class="caps">MP3</span> library are <a href="https://www.musicpd.org">mpd</a> and <a href="https://www.mopidy.com">mopidy</a>. Both solutions mostly work but are broken in some annoying way and don’t have any truly great&nbsp;clients.</p>
<p>I prefer to use my own project, <a href="https://github.com/irskep/summertunes">Summertunes</a>. It glues together the <a href="http://beets.io">beets</a> extensible music library manager and <a href="https://mpv.io">mpv</a> player in an iTunes-like web interface. That means Casey and I can control the same library and playlist from any web browser on any device, including our phones. It’s responsive and&nbsp;reliable.</p>
<p><img alt="Summertunes" src="http://steveasleep.com/img/home_audio_adventures/summertunes.png" /></p>
<p>I use <a href="http://www.soma-zone.com/LaunchControl/">LaunchControl</a> with some shell scripts to run <code>mpd</code> and Summertunes on login, so I never need to mess with them manually unless they&nbsp;break.</p>
<p>I recommend <a href="https://github.com/CDrummond/cantata/releases">Cantata</a> as an <span class="caps">MPD</span> client. It’s not very Mac-like, but it’s easy enough to find your way&nbsp;around.</p>
<p><img alt="Cantata" src="http://steveasleep.com/img/home_audio_adventures/cantata.png" /></p>
<p>We only use <span class="caps">MPD</span> if I’m actively working on Summertunes and have temporarily hosed the installation. So about once per&nbsp;month.</p>
<h2 id="input-passthrough">Input&nbsp;passthrough</h2>
<p>The Mac takes care of a lot by itself, but we still need to support a home theater <span class="caps">PC</span>, Bluetooth adapter, and 3.5mm aux cable. Some external hardware is&nbsp;necessary.</p>
<p>We could have the Mac output to a switch, but I’d rather just have everything merged into one signal so the music players work 100% of the time without having to remember what channel something is on. We can accomplish this using <a href="https://rogueamoeba.com/soundsource/">SoundSource</a>, a $10 utility that lets you mirror your Mac’s audio input to its&nbsp;output.</p>
<p>Buy SoundSource, run it, select “Open Play-Thru Window” in the menu, and click “Start Play-Thru.” You’ll need to hit this button after every reboot, unfortunately. If you use SoundSource for this purpose, please join me in sending feature request via their <a href="https://rogueamoeba.com/support/knowledgebase/?showCategory=SoundSource">support form</a> asking them to let us auto-enable&nbsp;it.</p>
<p><img alt="SoundSource" src="http://steveasleep.com/img/home_audio_adventures/soundsource.png" /></p>
<h2 id="audio-switching">Audio&nbsp;switching</h2>
<p>At this point, we’ve got a Mac hosting a music library and Spotify, which will pass through any input we send to it through its line-in port. We need to add Bluetooth, 3.5mm aux, and a home theater <span class="caps">PC</span>.</p>
<p>I spent <em>hours</em> on Amazon trying to find a device that does nothing but switch between 3 <span class="caps">RCA</span> or 3.5mm inputs, and has a remote control. The reason this is hard to find is that most people use a “stereo receiver,” which is both an amplifier and a switch. <a href="https://www.amazon.com/Yamaha-R-S202BL-Stereo-Receiver/dp/B01EMQI2CU/">(Example, $150.)</a> Stereo receiver remote controls never have fewer than 30 buttons. I don’t want anything in my house that has a D-pad and isn’t gaming&nbsp;controller.</p>
<p>I found exactly one device that fits my requirements: <a href="https://www.amazon.com/gp/product/B01HGISAOQ/">“iKKEGOL 5 Ways 4 Port <span class="caps">IN</span> 1 Out Video Audio S-Video Game <span class="caps">AV</span> Switch Box Selector with Remote Control Av-666d Black”</a>. It was twenty bucks and its remote has five buttons: four for input selection, one for&nbsp;power.</p>
<p><img alt="The switch" src="http://steveasleep.com/img/home_audio_adventures/switch.jpg" /></p>
<h2 id="bluetooth">Bluetooth</h2>
<p>All Bluetooth devices for home use are garbage, but some are less garbage than others. I have had okay but not great luck with <a href="https://www.amazon.com/gp/product/B016NUTG5K/">this adapter from Esinkin</a> and was totally dissatisfied by <a href="https://www.amazon.com/gp/product/B00SW0523A/">this one from iKross</a>. I didn’t realize it at the time, but <a href="http://thewirecutter.com/reviews/best-bluetooth-audio-receiver-for-your-home-stereo-or-speakers/">The Wirecutter has some suggestions that might be&nbsp;better.</a></p>
<p>We use Bluetooth a lot less now that Summertunes is working and populated, so I care about this a lot less than I used&nbsp;to.</p>
<h2 id="pieces-of-flair">Pieces of&nbsp;flair</h2>
<p>Every home across America with more than one audio source has a unique and probably awful system for getting audio from point A to point B. Ours is particularly unique! So I designed this handy reference card, and Casey printed it out on our brand new <a href="https://cricut.com">Cricut</a>:</p>
<p><img alt="The switch" src="http://steveasleep.com/img/home_audio_adventures/reference_card.jpg" /></p>
<p>Casey also gave the switcher remote the Cricut-assisted personal&nbsp;touch:</p>
<p><img alt="The switch" src="http://steveasleep.com/img/home_audio_adventures/remote.jpg" /></p>
<p>We’re still left with a minor cable nest, but the volume of the whole setup is only about two Macbook&nbsp;Pros.</p>
<h2 id="parting-thoughts">Parting&nbsp;thoughts</h2>
<p>After writing all this out, the first question I had for myself was whether it was all worth it. Shouldn’t I have just bought a stereo&nbsp;receiver?</p>
<p>I’m still glad I didn’t, if only because of those damn remote controls. And the mixing of two sources is really&nbsp;nice.</p>
<p>The only downside is that the switch I ended up with is not very well built and introduces a tiny bit of hum. The remote has to be pointed straight at it for it to work, too. But on the other hand, it’s simpler than any other home audio system I’ve&nbsp;used.</p></div>
  </article></section>

    <footer id="pagefooter" class="body">
      <div class="social-links">
        <!--
          <a href="http://steveasleep.com/feeds/all.rss.xml">RSS</a>
        -->
        <a href="http://github.com/irskep">GitHub</a><br>
        <a href="http://twitter.com/irskep">Twitter</a><br>
        <a href="http://www.last.fm/user/irskep">Last.fm</a><br>
      </div>
      Stephen R. Johnson<br>
      <a href="mailto:steve@steveasleep.com">steve@steveasleep.com</a><br>
      San Francisco, California
    </footer><!-- /#pagefooter -->

    <nav id="sidebar">
      <ul>
          <h1>Writing</h1>
            <li><a href="http://steveasleep.com/">Blog</a></li>
            <li><a href="http://steveasleep.com/pyglettutorial.html">Pyglet tutorial</a></li>
            <li><a href="http://steveasleep.com/resume.html">Résumé</a></li>
          <h1>Projects</h1>
            <li><a href="http://steveasleep.com/computerwords">Computer Words</a></li>
            <li><a href="http://literallycanvas.com/">Literally Canvas</a></li>
            <li><a href="http://mrjob.readthedocs.org/">mrjob</a></li>
            <li><a href="http://steveasleep.com/games.html">Games</a></li>
            <li><a href="http://hipmunk.github.io">Hipmunk OSS</a></li>
          <h1>Music</h1>
            <li><a href="http://thenestmusic.com">The Nest</a></li>
            <li><a href="http://slamjamsen.com">Slam Jamsen</a></li>
            <li><a href="http://steveasleep.com/music.html">Other music</a></li>
      </ul>
    </nav>
  </div>

  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4517625-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</body>
</html>